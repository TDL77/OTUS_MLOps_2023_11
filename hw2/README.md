# Домашнее задание №1.

## Задание 1. Сформулировать цели проектируемой антифрод-системы в соответствии с требованиями заказчика
Минимизировать количество осуществленных мошеннических транзакций и денежный ущерб клиентов в системе онлайн платежей.
Не допустить оттока клиентов из системы онлайн платежей из-за корректных транзакций, по ошибке определенных антифрод-системой, как мошеннические.
## Задание 2. Аргументированно выбрать метрику машинного обучения, оптимизация которой, на Ваш взгляд, позволит достичь поставленных целей.
В среднем, доля фродовых транзакций среди общего количества транзакций очень мала и, как правило, не превышает и сотых долей процентов. Соответственно, мы имеем дисбаланс классов. Метрики AUC не зависят от соотношения классов и выбора определенного порога, поэтому в данной задаче лучше использовать одну из таких метрик. В частности, для данной задачи нам подойдет метрика Precission/Recall, т.к. в сравнении с ROC-AUC она более удобна для сравнения алгоритмов, когда нам не так важно определение большего класса (TrueNegative).

## Задание 3. Проанализировать особенности проекта.
Анализ по методике MISSION Canvas

* Задача. Разработать модель машинного обучения, способную в реальном времени оценивать является ли проводимая транзакция мошеннической.
* Страхи.
    Не успеть сделать MVP за три месяца, чтобы дать руководству понять, что проект стоит развивать дальше
    Не уложиться в выделенный бюджет
    Не получится разработать модель, чтобы она соответствовала минимальным требованиям заказчика: общий ущерб клиентов за месяц < 500 т.р.; не более двух мошеннических транзакции на каждую сотню проведенных.
    Модель не сможет выдержать нагрузку в предпраздничные дни
    Доля корректных транзакций, классифицированных, как мошеннические, будет больше 5%
    Система будет ненадежна и вероятность утечек будет слишком высока
* Контекст. Рост мошенничества при проведении онлайн-платежей, что создает большие сложности для валидации транзакций и негативно влияет на клиентский опыт.
* Личные цели. Разработка и продуктивизация качественной системы для выявления фродовых транзакций в реальном времени.
* Новые умения.
    Навык разработки модели машинного обучения
    Навык настройки инфраструктуры для модели
    Самостоятельный вывод модели в продакшн
* Ради каких эмоций мы этим занимаемся. Ради гордости за проделанную работу и повышения уверенности в собственных силах в разработки систем машинного обучения с нуля.
* Социальный фидбэк. Хочу получить признания от коллег и специалистов в области машинного обучения.
* Альтернативы. Можно ли достичь поставленных целей другим путём. Можно, но другой проект, который совмещает в себе все те профиты, которые перечислены выше, найти сложно.
* Выгода для клиента. Клиенты получат возможность пользоваться надёжным сервисом онлайн-платежей без боязни стать жертвой мошенников, а банк получит большую денежную выгоду, если проект будет реализован
* Неотвратимость. Почему я не могу не заниматься этим проектом.
    Я понимаю, что получу важные знания и опыт, завершив этот проект.
    Меньше людей станут жертвами мошенников.

## Задание 4. Декомпозиция системы.
Все функциональные модули находятся в облаке

* Источники данных с новыми транзакциями
* Библиотека/сервис для передачи real-time данных на вход сервиса для скоринга ml модели. Данные делятся на части
* Сервис для скоринга ml модели (бинарный файл ml модели и скрипты для её запуска). Несколько инстансов запущены на нескольких серверах одновременно для отказоустойчивости и производительности. Каждый инстанс обрабатывает свою часть данных. Если один инстанс падает, другой берет на себя его работу
* In-memory база данных для хранения результатов скоринга
* Rest API для получения результатов скоринга из in-memory базы и отправки клиенту вердикта о транзакции
* Сервис для получения, шифрования и сохранения данных о транзакциях в csv файлы на защищенном сервере

## Задание 5. Определение задач.
Задачи по принципу SMART

* Подготовить первоначальный список необходимых сервисов в облаке и затраты на них в последующие 9 месяцев. Сумма затрат не более 6 млн. Срок - 2 дня.
* Подготовить минимальную инфраструктуру необходимую для разработки модели в облаке. (настроить GitHub, создать репозиторий проекта, поднять in-memory базу данных, s3 хранилище для модели и ее артефактов, развернуть hadoop, spark, mlflow, kafka, настроить CI/CD). Срок - 2,5 недели.
* Подготовить тестовые данные для обучения модели в размере 130 млн записей с соотношением фродовых транзакций ~0.01%. Срок - 1 неделя.
* Обучить ml модель со значениями метрик Precision > 0.75 и Recall > 0.75. Срок - 1 месяц.
* Написать скрипты для запуска обученной ml модели, способные скорить от 300 транзакций в минуту. Срок - 1 неделя.
* Разработать простой REST API на FastAPI для отправки результатов скоринга клиенту. Срок - 1 неделя.
* Разработать сервис для симметричного шифрования и сохранения данных за временной промежуток до недели о транзакциях в хранилище s3. Срок - 2 недели.
* Показать и защитить MVP перед заказчиком. Срок - 1 день.
* Улучшить показание метрик ml модели до Precision > 0.9 и Recall > 0.9, при этом доля FP (фродовые транзакции, определенные, как нефродовые) среди всех транзакций не должна превышать 0.02, а доля FN среди всех транзакций не более 0.05. Сумма потерянных клиентских денег за месяц не должна превышать 500 т.р.. Срок - 1,5 месяца.
* Разработать распределенный сервис по параллельному скорингу модели, принимающий данные через kafka и способный выдавать результаты скоринга по 400 транзакциям в секунду. Срок - 1,5 месяц.
* Разработать тестовое окружение для нагрузочного тестирования сервиса скоринга, способное отправлять запросы на скоринг до 2000 транзакций в секунду. Срок - 2 недели.
* Добавить ассиметричное шифрование в сервис сохранения данных о транзакциях. Срок - 1 неделя.
* Если потребуется, доработать REST API отправки результатов клиенту, чтобы не было узкого горлышка при возвращении результатов скоринга клиенту. Срок - 1 неделя.
* Разработать системные и интеграционные тесты и провести тестирование. Срок - 1 месяц
* Исправление критических ошибок, мешающих корректной работе системы и нарушающих требований заказчика, если такие вдруг вскроются, если нет - исправление более мелких багов. Срок - 1 месяц

## Задание 6. Kanban доска
https://github.com/users/TDL77/projects/1
https://github.com/users/TDL77/projects/2/

